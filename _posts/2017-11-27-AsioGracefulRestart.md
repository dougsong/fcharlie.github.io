---
layout: post
title:  "基于 Asio 的服务器平滑重启方案"
date:   2017-11-27 10:00:00
published: false
categories: server
---

## 前言

与客户端程序不同的是，服务端程序要尽可能的长时间运行，故障时能够自动恢复，并且更新时不能影响服务正在处理的请求。这就产生了平滑重启的功能需求。实际上，网络上比较流行的 HTTP 服务器 Nginx 就支持平滑重启。而 apache httpd 同样支持。码云分布式以后，很多功能被分解成一个个的服务，比如存储机器上的 git-srv, git-diamond 等等，为了平台的稳定运行，也需要支持平滑重启。

## 平滑重启的机制


## Asio 平滑重启